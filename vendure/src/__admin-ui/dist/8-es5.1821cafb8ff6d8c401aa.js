!function(){function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function t(){var e=n(["\n    query webhook {\n        webhook\n    }\n"]);return t=function(){return e},e}function o(){var e=n(["\n    mutation updateWebhook($url: String!) {\n        updateWebhook(url: $url)\n    }\n"]);return o=function(){return e},e}function n(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{IjRG:function(n,i,c){"use strict";c.r(i),c.d(i,"WebhookModule",(function(){return k}));var u=c("sEIs"),a=c("ixhn"),s=c("D57K"),h=c("nIj0"),b=c("H5qd"),f=c.n(b),l=f.a(o()),m=f.a(t()),p=c("EM62"),d=function(){function t(r,o,n,i,c,u,a){e(this,t),this.formBuilder=i,this.dataService=c,this.changeDetector=u,this.notificationService=a,this.webhookForm=this.formBuilder.group({url:["https://example.com",h.C.required]})}var o,n,i;return o=t,(n=[{key:"ngOnInit",value:function(){return Object(s.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dataService.query(m).mapStream((function(e){return e.webhook})).subscribe((function(e){return r.webhookForm.controls.url.setValue(e)}));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"save",value:function(){return Object(s.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("SAVEDDD",this.webhookForm.value.url),e.prev=1,!this.webhookForm.dirty){e.next=6;break}return r=this.webhookForm.value,e.next=6,this.dataService.mutate(l,{url:r.url}).toPromise();case 6:this.webhookForm.markAsPristine(),this.changeDetector.markForCheck(),this.notificationService.success("common.notify-update-success",{entity:"Webhook"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.notificationService.error("common.notify-update-error",{entity:"Webhook"});case 12:case"end":return e.stop()}}),e,this,[[1,9]])})))}}])&&r(o.prototype,n),i&&r(o,i),t}();d.\u0275fac=function(e){return new(e||d)(p.cc(u.a),p.cc(u.e),p.cc(a.Mb),p.cc(h.e),p.cc(a.L),p.cc(p.k),p.cc(a.Eb))},d.\u0275cmp=p.Wb({type:d,selectors:[["greeter"]],decls:8,vars:2,consts:[[1,"clr-row"],[1,"clr-col"],[1,"form",3,"formGroup"],[1,"form-block"],["label","Webhook url","for","url"],["id","url","type","text","formControlName","url"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(e,r){1&e&&(p.ic(0,"div",0),p.ic(1,"div",1),p.ic(2,"form",2),p.ic(3,"section",3),p.ic(4,"vdr-form-field",4),p.dc(5,"input",5),p.hc(),p.ic(6,"button",6),p.pc("click",(function(){return r.save()})),p.Wc(7," Save "),p.hc(),p.hc(),p.hc(),p.hc(),p.hc()),2&e&&(p.Rb(2),p.yc("formGroup",r.webhookForm),p.Rb(4),p.yc("disabled",r.webhookForm.invalid||r.webhookForm.pristine))},directives:[h.E,h.q,h.j,a.eb,a.fb,h.b,h.p,h.h],encapsulation:2});var k=function r(){e(this,r)};k.\u0275mod=p.ac({type:k}),k.\u0275inj=p.Zb({factory:function(e){return new(e||k)},providers:[Object(a.Wb)({id:"webhook",label:"Webhook",routerLink:["/extensions/webhook"],icon:"cursor-hand-open"},"settings")],imports:[[a.Nb,u.i.forChild([{path:"",pathMatch:"full",component:d,data:{breadcrumb:"Webhook"}}])]]})}}])}();
//# sourceMappingURL=8-es5.1821cafb8ff6d8c401aa.js.map